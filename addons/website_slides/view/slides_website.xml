<?xml version="1.0" ?>
<openerp>
    <data>

        <!-- add link to the standard footer -->
        <template id="slide_footer" inherit_id="website.footer_default"
            name="Footer Slides Link">
            <xpath expr="//div[@id='info']//ul[@class='list-unstyled']" position="inside">
                <li>
                    <a href="/slides">Presentations</a>
                </li>
                <li>
                    <a href="/slides">Videos</a>
                </li>
            </xpath>
        </template>

        <!-- header template to add scripts to all pages -->
        <template id="assets_frontend" inherit_id="website.assets_frontend" name="Slide">
          <xpath expr="." position="inside">
                <link type="text/less" href="/website_slides/static/src/less/website_slides.less" rel="stylesheet" t-ignore="true"/>
          </xpath>
        </template>
        <template id="head" name="slides">
            <script type="text/javascript" src="/website_slides/static/src/js/slides.js"></script>
        </template>

        <!-- search box -->
        <template id="search" name="search">
            <form t-attf-action="/slides/#{slug(channel)}/search" role="search" method="get">
                <div class="input-group">
                    <input type="text" class="form-control slide-border-radius" name="query" placeholder="Search Presentations ..." t-att-value="query"/>
                    <span class="input-group-btn">
                        <button class="btn btn-primary slide-border-radius" type="submit">
                            <i class="fa fa-search"></i>
                        </button>
                    </span>
                </div>
            </form>
        </template>

        <template id='pdfview' name="pdfview">
            <div class="panel panel-default slide-border-radius">
                <div class="panel-body" style="padding: 0px;">
                    <t t-if="slide.slide_type == 'infographic'">
                        <img t-attf-src="/website/image/ir.attachment/#{slide.id}/image" class="img-responsive"/>
                    </t>
                    <t t-if="slide.slide_type in ('presentation', 'document')">
                        <div id="PDFViewer" t-attf-slide-id="#{slide.id}" t-att-file="pdf_file"/>
                    </t>
                </div>
            </div>
        </template>

        <template id="pdfembed" name="pdfembed">
            <html>
                <head>
                    <title><t t-esc="slide.name"/></title>
                    <link href="/web/css/web.assets_common/b6496be" rel="stylesheet"/>
                    <link href="/web/css/website.assets_frontend/44e82bd" rel="stylesheet"/>
                    <link rel="stylesheet" href="/website_slides/static/src/css/website_slides.css"/>
                </head>
                <body style="padding-top: 50px;padding-bottom: 50px;">
                    <!-- Fixed top navbar -->
                    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
                        <div class="container">
                            <div class="row" style="margin-top: 15px;">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-left">
                                    <a class="toggle-slide-option" data-slide-option-id="#slide_share"><i class="fa fa-share"></i> Share</a>
                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-left">
                                    <a class="toggle-slide-option" data-slide-option-id="#slide_email"><i class="fa fa-envelope"></i> Email</a>
                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-left">
                                    <a class="toggle-slide-option" data-slide-option-id="#slide_embed"><i class="fa fa-code"></i> Embed</a>
                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 text-left">
                                    <a id="like" class="slide-like" t-att-user-id="user.id" t-att-attachment-id="slide.id" t-attf-data-href="/slides/#{slug(channel)}/view/#{slug(slide)}/like"><i class="fa fa-thumbs-up"></i> Like</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- pdf container -->
                    <div id="pdf_container" style="position:relative;">
                        <div id="slide_share" class="slide-option-toggle">
                            <t t-call="website_slides.socialshare"/>
                            <t t-call="website_slides.sendemail"/>
                            <t t-call="website_slides.embed"/>
                        </div>
                        <div id="slide_email" class="slide-option-toggle">
                            <t t-call="website_slides.sendemail"/>
                        </div>
                        <div id="slide_embed" class="slide-option-toggle">
                            <t t-call="website_slides.embed"/>
                        </div>

                        <t t-if="slide.slide_type in ('presentation', 'document')">
                            <canvas id="pdfcanvas" class="img-responsive" style="width:100%;height:100%"></canvas>
                        </t>

                        <t t-if="slide.slide_type in ('infographic')">
                            <img t-attf-src="/website/image/ir.attachment/#{slide.id}/image" class="img-responsive"/>
                        </t>

                    </div>

                    <!-- Fixed bottom navbar -->
                    <div class="navbar navbar-default navbar-fixed-bottom" role="navigation" t-if="slide.slide_type in ('presentation', 'document')">
                        <div class="container">
                            <div class="row" style="margin-top: 10px;">
                                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-3 text-left">
                                    <input type="number" style="width: 45px;border: 1px solid #ddd;text-align: center;" id="page_number"></input> / <span id="page_count"></span>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-6 text-center">
                                    <a id="first" role="button"><i class="fa fa-step-backward fa-2x"></i></a>
                                    <a id="previous" role="button"><i class="fa fa-arrow-circle-left fa-2x"></i></a>
                                    <a id="next" role="button"><i class="fa fa-arrow-circle-right fa-2x"></i></a>
                                    <a id="last" role="button"><i class="fa fa-step-forward fa-2x"></i></a>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-3 text-right">
                                    <a id="fullscreen"><i class="fa fa-arrows-alt fa-2x"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="pdf_file" t-att-value="slide.url"/>
                    <input type="hidden" id="pdf_page" t-att-value="page"/>

                <script type="text/javascript" src="/web/js/web.assets_common/b6496be"></script>
                <script type="text/javascript" src="/web/js/website.assets_frontend/44e82bd"></script>
                <script type="text/javascript" src="/website_slides/static/lib/pdfjs/build/pdf.js"></script>
                <script type="text/javascript" src="/website_slides/static/src/js/slide_embed.js"></script>
                </body>
            </html>
        </template>


        <!-- all share components -->
        <template id='socialshare' name="Social Media Share">
            <h4 class="mt0">Share</h4>
            <div class="form-group oe_share">
                <a target="_Blank" class="oe_share_facebook" href="https://www.facebook.com/sharer/sharer.php?u={url}"><i class="fa fa-facebook-square fa-2x"></i></a>
                <a target="_Blank" class="oe_share_twitter" href="https://twitter.com/intent/tweet?text={title}&amp;url={url}"><i class="fa fa-twitter-square fa-2x"></i></a>
                <a target="_Blank" class="oe_share_linkedin" href="http://www.linkedin.com/shareArticle?mini=true&amp;url={url}&amp;title={title}&amp;"><i class="fa fa-linkedin-square fa-2x"></i></a>
                <a target="_Blank" class="oe_share_google" href="https://plus.google.com/share?url={url}"><i class="fa fa-google-plus-square fa-2x"></i></a>
            </div>
            <h4 class="mt0">Share Link</h4>
            <input type="text" class="form-control" t-att-value="slide._get_share_url()" readonly="readonly" onClick="this.select();"/>
            <span class="help-block">Use permanent link to share in social media</span>
        </template>

        <template id='sendemail' name="Email">
            <t t-if="not is_public_user">
                <h4 class="mt0">Email</h4>
                <form class="form-inline" role="form">
                    <div class="input-group col-md-6">
                        <input type="text" class="form-control" placeholder="your-friend@domain.com"/>
                        <span class="input-group-btn">
                            <button class="btn btn-primary form-control" type="submit"><i class="fa fa-envelope-o"></i> Send Email</button>
                        </span>
                    </div>
                    <span class="help-block">Send presentation through email, with beautiful email</span>
                </form>
            </t>
        </template>

        <template id="embed" name="Embed Code">
            <h4 class="mt0">Embed Code</h4>
            <div class="form-group">
                <textarea class="form-control slide_embed_code" readonly="readonly" onClick="this.select();"><t t-esc="slide._get_embade_code()"/></textarea>
            </div>
            <div class="form-group" t-if="slide.slide_type in ('presentation', 'document')">
                <div class="input-group col-lg-3 col-md-3 col-sm-6 col-xs-6">
                    <input type="number" value="1" class="form-control embed-page-counter"/>
                </div>
                <span class="help-block">Select page to start with</span>
            </div>
        </template>

        <template id='videoview' name="Video Viewer">
            <div class="row">
                <div class="panel panel-default slide-border-radius">
                    <div class="panel-body" style="padding: 0px;">
                        <div class="embed-responsive embed-responsive-4by3 embed-responsive-item">
                             <iframe t-attf-src="//www.youtube.com/embed/#{famous.youtube_id}?theme=light"></iframe>
                         </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="channelheader" name="Slide Channel Header">
            <section class="slide-box-shadow">
                <div class="container">
                    <div class="row">
                        <div class="pull-left col-md-8 col-sm-12 col-xs-12 mt16 mb8">
                            <h3 class="mt0">
                                <t t-esc="channel.name"/>
                                <t t-if="is_public_user">
                                    <a t-attf-href="/web?redirect=#{request.httprequest.url}" class="btn btn-danger slide-border-radius">
                                        <i class="fa fa-cloud-upload"></i> Upload 
                                    </a>
                                </t>
                                <t t-if="not is_public_user">
                                    <a class="btn btn-danger upload slide-border-radius" t-attf-channel_id="#{channel.id}">
                                        <i class="fa fa-cloud-upload"></i> Upload 
                                    </a>
                                </t>
                            </h3>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12 pul-right mt16 mb8">
                            <t t-call="website_slides.search"/>
                        </div>
                        <div class="col-md-6 col-sm-12 col-xs-12">
                            <ul class="nav nav-tabs nav-tabs-simple nav-tabs-sm nav-tabs-border">
                                <li t-attf-class="slide-tabs-li #{not types and 'active' ''}">
                                    <a  t-attf-href="/slides/#{slug(channel)}" class="slide-tabs" data-toggle="tab">Home</a>
                                </li>
                                <li t-if="channel.presentations" t-attf-class="slide-tabs-li #{types == 'presentation' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/presentation" class="slide-tabs" data-toggle="tab"> <span class="badge"><t t-esc="channel.presentations"/></span> Presentations</a>
                                </li>
                                <li t-if="channel.videos" t-attf-class="slide-tabs-li #{types == 'video' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/video" class="slide-tabs" data-toggle="tab"> <span class="badge"><t t-esc="channel.videos"/></span> Videos</a>
                                </li>
                                <li t-if="channel.documents" t-attf-class="slide-tabs-li #{types == 'document' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/document" class="slide-tabs" data-toggle="tab"> <span class="badge"><t t-esc="channel.documents"/></span> Documents</a>
                                </li>
                                <li t-if="channel.infographics" t-attf-class="slide-tabs-li #{types == 'infographic' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/infographic" class="slide-tabs" data-toggle="tab"><span class="badge"><t t-esc="channel.infographics"/></span> Infographics</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-6 col-sm-12 col-xs-12">
                            <span class="pull-right">
                                Sort by :
                                    <a href="?sorting=date">Recently Published</a> |
                                    <a href="?sorting=view">Most Viewed</a> | 
                                    <a href="?sorting=vote">Most Voted</a>
                            </span>
                        </div>
                    </div>
                </div>
            </section>
        </template>

        <template id="categoryheader" name="Slide Category Header">
            <section class="slide-box-shadow">
                <div class="container">
                    <div class="row">
                        <div class="pull-left col-md-8 col-sm-12 col-xs-12 mt16 mb8">
                            <h3 class="mt0">
                                <a t-attf-href="/slides/#{slug(channel)}"><t t-esc="channel.name"/></a>
                                <t t-if="category">/ <t t-esc="category.name"/></t>
                                <t t-if="is_public_user">
                                    <a t-attf-href="/web?redirect=#{request.httprequest.url}" class="btn btn-danger slide-border-radius">
                                        <i class="fa fa-cloud-upload"></i> Upload 
                                    </a>
                                </t>
                                <t t-if="not is_public_user">
                                    <a class="btn btn-danger upload slide-border-radius" t-attf-channel_id="#{channel.id}">
                                        <i class="fa fa-cloud-upload"></i> Upload 
                                    </a>
                                </t>
                            </h3>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12 pul-right mt16 mb8">
                            <t t-call="website_slides.search"/>
                        </div>
                        <div class="col-md-8 col-sm-12 col-xs-12">
                            <ul class="nav nav-tabs nav-tabs-simple nav-tabs-sm nav-tabs-border">
                                <li t-attf-class="slide-tabs-li #{not types and 'active' ''}">
                                    <a  t-attf-href="/slides/#{slug(channel)}/category/#{slug(category)}" class="slide-tabs" data-toggle="tab">Home</a>
                                </li>
                                <li t-if="category.presentations" t-attf-class="slide-tabs-li #{types == 'presentation' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/category/#{slug(category)}/presentation" class="slide-tabs" data-toggle="tab"> <span class="badge"><t t-esc="category.presentations"/></span> Presentations</a>
                                </li>
                                <li t-if="category.videos" t-attf-class="slide-tabs-li #{types == 'video' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/category/#{slug(category)}/video" class="slide-tabs" data-toggle="tab"> <span class="badge"><t t-esc="category.videos"/></span> Videos</a>
                                </li>
                                <li t-if="category.documents" t-attf-class="slide-tabs-li #{types == 'document' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/category/#{slug(category)}/document" class="slide-tabs" data-toggle="tab"> <span class="badge"><t t-esc="category.documents"/></span> Documents</a>
                                </li>
                                <li t-if="category.infographics" t-attf-class="slide-tabs-li #{types == 'infographic' and 'active' ''}">
                                    <a t-attf-href="/slides/#{slug(channel)}/category/#{slug(category)}/infographic" class="slide-tabs" data-toggle="tab"><span class="badge"><t t-esc="category.infographics"/></span> Infographics</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-4 col-sm-12 col-xs-12">
                            <span class="pull-right small">
                                Sort by :
                                <a href="?sorting=date">Recently Published</a> |
                                <a href="?sorting=view">Most Viewed</a> | 
                                <a href="?sorting=vote">Most Voted</a>
                            </span>
                        </div>
                    </div>
                </div>
            </section>
        </template>

        <!-- entry page of the slide application -->
        <template id='searchresult' name="Odoo Slide Search">
            <t t-call="website.layout">
                <div class="wrap">
                    <section class="slide-box-shadow">
                        <div class="container">
                            <div class="row slide-pr0 slide-pl0 mt16 mb16">
                                <div class="col-md-8 pull-left">
                                    <h3 class="mt0">
                                        Searching in <a t-attf-href="/slides/#{slug(channel)}"><t t-esc="channel.name"/></a>
                                    </h3>
                                </div>
                                <div class="col-md-4 pull-right">
                                    <t t-call="website_slides.search"/>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section>
                        <div class="container">
                            <div class="row slide-pr0 slide-pl0">
                                <t t-call="website_slides.gridview"/>
                            </div>
                            <div class="row text-center">
                                <t t-call="website.pager"/>
                            </div>
                        </div>
                    </section>
                </div>
            </t>
        </template>

        <!-- entry page of the slide application -->
        <template id='home' name="Odoo Slides">
            <t t-set="head">
                <t t-call="website_slides.head"/>
                <script type="text/javascript" src="/web/static/lib/jquery.textext/jquery.textext.js"/>
                <link rel='stylesheet' href="/web/static/lib/jquery.textext/jquery.textext.css"/>
                <script type="text/javascript" src="/website_slides/static/lib/pdfjs/build/pdf.js"></script>
            </t>
            <t t-call="website.layout">
                <div class="wrap">
                    
                    <t t-if="not category">
                        <t t-call="website_slides.channelheader"/>
                    </t>
                    <t t-if="category">
                        <t t-call="website_slides.categoryheader"/>
                    </t>

                    <section t-if="not famous and not tags and not types and not search and not is_public_user and not category" class="wrap mt16 mb0">
                        <div class="container">
                            <div class="alert alert-danger alert-dismissable mb0 slide-border-radius">
                                <p>
                                    Review your channel settings to promote your most viewed or recent published presentation
                                </p>
                                <a t-attf-href="/web#return_label=Website&amp;id=#{channel.id}&amp;view_type=form&amp;model=slide.channel" class="fa fa-arrow-right mt8">
                                    Channel Setting
                                </a>
                            </div>
                        </div>
                    </section>
                    <section class="slide-promote-box" t-if="famous and not tags and not types and not search and not category">
                        <div class="container">
                            <div class="row">
                                <div>
                                    <div class="col-md-5 mt16 mb16">
                                        <a t-attf-href="/slides/#{slug(channel)}/#{famous.slide_type}/#{slug(famous)}">
                                            <span class="slide-promore-image">
                                                <img t-attf-src="/website/image/ir.attachment/#{famous.id}/image" class="img-responsive shadow slide-width slide-opacity"/>
                                                <span class="label label-info" style="position: absolute;right: 20px;top: 7px;">Latest Published</span>
                                            </span>
                                        </a>
                                    </div>

                                    <div class="col-md-7 mt16">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 slide-pl0">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 slide-pl0">
                                                <p class="oe-slides-text-truncation h3 mt0 mb0 slide-pl0">
                                                    <a t-attf-href="/slides/#{slug(channel)}/#{famous.slide_type}/#{slug(famous)}">
                                                        <t t-esc="famous.name"/>
                                                    </a>
                                                </p>
                                                <div class="mt8 mb8 col-md-16 slide-pl0" t-if="famous.tag_ids">
                                                    <t t-foreach="famous.tag_ids" t-as="att_tag">
                                                        <a t-attf-href="/slides/#{slug(channel)}/tag/#{att_tag.name}">
                                                            <span t-attf-class="label label-default #{tags and tags == att_tag.name and 'label-primary' ''}" t-field="att_tag.name"/>
                                                        </a>
                                                    </t>
                                                </div>
                                                <p t-if="famous.description"><t t-raw="'&lt;br/&gt;'.join(famous.description.split('\n')[0:10])"/></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section>
                        <div class="container mt16">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding-left: 15px;padding-right: 15px;" t-if="channel.total == 0">
                                    <div class="jumbotron slide-border-top slide-border-radius">
                                        <h1>No presentation published yet.</h1>
                                        <p>
                                            The <i><t t-esc="channel.name"/></i> is empty. Upload PDF presentations, documents, videos or infographic using the button below.
                                        </p>
                                        <p>
                                            <a t-if="is_public_user" t-attf-href="/web?redirect=#{request.httprequest.url}" class="btn btn-danger upload slide-border-radius slide-pading">
                                                <i class="fa fa-cloud-upload"></i> Upload 
                                            </a>
                                            <a t-if="not is_public_user" class="btn btn-danger upload slide-border-radius slide-pading" t-attf-channel_id="#{channel.id}">
                                                <i class="fa fa-cloud-upload"></i> Upload
                                            </a>
                                        </p>
                                    </div>
                                </div>

                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 slide-pr0 slide-pl0" t-if="types or category or tags">
                                    <t t-call="website_slides.gridview"/>
                                </div>
                                <div class="row text-center" t-if="types or category or tags">
                                    <t t-call="website.pager"/>
                                </div>

                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mb16 slide-pl0 slide-pr0" t-if="not types and category_ids and not tags">
                                    <t t-foreach="category_ids" t-as="category">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt8 slide-pl0 slide-pr0 slide-border-color">
                                                <a t-attf-href="/slides/#{slug(channel)}/category/#{slug(category)}" class="h3 mt0 mb0">
                                                    <t t-esc="category.name"/>
                                                </a>
                                                <a t-attf-href="/slides/#{slug(channel)}/category/#{slug(category)}" class="pull-right">
                                                    <i class="fa fa-arrow-right"></i> View <t t-esc="category.total - 4"/> more
                                                </a>
                                            </div>
                                        </div>
                                        <t t-call="website_slides.gridview">
                                            <t t-set="attachment_ids" t-value="category_datas.get(category.name, [])"/>
                                        </t>
                                    </t>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </t>
        </template>

        <!-- channel list, will be display if more then one channel available -->
        <template id="channels" name="Channels">
            <t t-set="head"><t t-call="website_slides.head"/></t>
            <t t-call="website.layout">
                <div class="oe_structure"/>
                <div class="container mt16">
                    <div class="row">
                        <div t-foreach="channels" t-as="channel" class="col-sm-4 mb32">
                            <t t-set="famous" t-value="channel.get_mostviewed()"/>
                            <div class="oe-channel-grid-thumbnail">
                                <a t-attf-href="/slides/#{slug(channel)}" t-if="famous">
                                    <span class="channel-box">
                                        <img t-attf-src="/website/image/ir.attachment/#{famous.id}/image" class="img-responsive slide-width slide-opacity"/>
                                    </span>
                                </a>
                                <a t-attf-href="/slides/#{slug(channel)}" t-if="not famous">
                                    <span class="channel-box">
                                        <img src="/website_slides/static/description/channel-default.jpg" class="img-responsive slide-width slide-opacity"/>
                                    </span>
                                </a>
                                <div style="padding: 5px;">
                                    <a t-attf-href="/slides/#{slug(channel)}">
                                        <p class="oe-slides-text-truncation mt4 mb4 lead">
                                            <t t-esc="channel.name"/>
                                        </p>
                                    </a>
                                    <p t-field="channel.description"/>
                                    <div class="mt4">
                                        <t t-call="website.publish_management">
                                            <t t-set="object" t-value="channel"/>
                                            <t t-set="publish_edit" t-value="True"/>
                                        </t>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>

        <!-- display one slide -->
        <template id='slide_view' name="Odoo Slide">
            <t t-set="head">
                <t t-call="website_slides.head"/>
                <script type="text/javascript" src="/website_slides/static/lib/pdfjs/build/pdf.js"></script>
            </t>
            <t t-call="website.layout">
                <t t-set="main_object" t-value="slideview"/>
                <div class="container mt16">
                    <div class="row">
                        <t t-call="website_slides.detailview"/>
                    </div>
                </div>
            </t>
        </template>

        <!-- slide grid view -->
        <template id='gridview' name="Slides">
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12 slide-collection" t-foreach="attachment_ids" t-as="attachment">
                <div t-attf-class="oe-grid-thumbnail">
                    <a t-attf-href="/slides/#{slug(channel)}/#{attachment.slide_type}/#{slug(attachment)}">
                        <span t-attf-class="oe-image-thumbnail">
                            <img t-attf-src="/website/image/ir.attachment/#{attachment.id}/image" class="img-responsive slide-width"/>
                        </span>
                    </a>
                    <span t-if="not attachment.website_published" class="label label-danger" style="position: absolute;right: 20px;top: 7px;">Not Published</span>

                    <div style="padding: 5px;">
                        <a t-attf-href="/slides/#{slug(channel)}/#{attachment.slide_type}/#{slug(attachment)}">
                            <p class="oe-slides-text-truncation lead mb4">
                                <t t-esc="attachment.name"/>
                            </p>
                        </a>
                        <div class="text-muted">
                            <small class="pull-left">
                                <t t-esc="attachment.slide_views" />
                                Views
                            </small>
                            <small class="pull-right">
                                <timeago class="timeago" t-att-title="attachment.create_date"></timeago>
                            </small>
                        </div>
                        <p t-if="attachment.tag_ids" class="oe-slides-text-truncation" style="padding-top: 5px;">
                            <t t-foreach="attachment.tag_ids" t-as="att_tag">
                                <a t-attf-href="/slides/#{slug(channel)}/tag/#{att_tag.name}">
                                    <span t-attf-class="label label-default #{tags and tags == att_tag.name and 'label-primary' ''}" t-field="att_tag.name"/>
                                </a>
                            </t>
                        </p>
                    </div>
                </div>
            </div>
        </template>

        <!-- slide detail view -->
        <template id='detailview' name="Slide Detail">
            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
                <t t-if="slideview.datas">
                    <t t-call="website_slides.pdfview">
                        <t t-set="pdf_file" t-value="slideview.url"/>
                        <t t-set="slide" t-value="slideview"/>
                    </t>
                </t>
                <div t-if="slideview.youtube_id" class="embed-responsive embed-responsive-16by9 embed-responsive-item mb8">
                    <iframe t-attf-src="//www.youtube.com/embed/#{slideview.youtube_id}?theme=light"></iframe>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 slide-pl0 slide-pr0">
                    <h3 class="oe-slides-text-truncation mt0">
                        <t t-esc="slideview.name"/>
                        <t t-call="website.publish_management">
                            <t t-set="object" t-value="slideview"/>
                            <t t-set="publish_edit" t-value="True"/>
                        </t>
                    </h3>
                    <div class="mb16 col-md-12 slide-pl0" t-if="slideview.tag_ids">
                        <t t-if="slideview.category_id">
                            <p>Published under <a t-attf-href="/slides/#{slug(channel)}/category/#{slug(slideview.category_id)}"><t t-esc="slideview.category_id.name"/></a></p>
                        </t>
                        <t t-foreach="slideview.tag_ids" t-as="att_tag">
                            <a t-attf-href="/slides/#{slug(channel)}/tag/#{att_tag.name}">
                                <span t-attf-class="label label-default #{tags and tags == att_tag.name and 'label-primary' ''}" t-field="att_tag.name"/>
                            </a>
                        </t>
                    </div>
                    <!--div class="mb16 col-md-6 slide-pr0 pull-right text-right" t-if="slideview.tag_ids ">
                        <t t-foreach="slideview.tag_ids" t-as="att_tag">
                            <a t-attf-href="/slides/#{slug(channel)}/tag/#{att_tag.name}">
                                <span t-attf-class="label label-default #{tags and tags == att_tag.name and 'label-primary' ''}" t-field="att_tag.name"/>
                            </a>
                        </t>
                    </div-->
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 slide-pl0 slide-pr0">
                    <div class="col-lg-1 col-md-1 col-sm-1 col-xs-2 slide-pl0">
                        <a t-attf-href="/slides/#{slug(channel)}">
                            <i class="fa fa-circle-o fa-5x" style="color: #a24689;font-weight: bold;"></i>
                            <!--img src="/website_slides/static/description/odoo-logo.jpg" class="img-responsive" style="border: 1px solid #CCC;"/-->
                        </a>
                    </div>
                    <div class="col-lg-11 col-md-11 col-sm-11 col-xs-10 slide-pl0 slide-pr0">
                        <div class="pull-left col-md-7">
                            <a t-attf-href="/slides/#{slug(channel)}">
                                <p t-field="channel.name"/>
                            </a>
                            <div class="mt0">
                                <t t-call="website_mail.follow">
                                    <t t-set="email" t-value="user.email"/>
                                    <t t-set="object" t-value="channel"/>
                                </t>
                            </div>
                        </div>
                        <div class="pull-right text-right col-md-4 slide-pr0">
                            <div class="slide-border-font">
                                <b><t t-esc="slideview.slide_views"/></b> views
                            </div>
                            <div class="text-muted mt4">
                                <div class="pull-right mb16 col-md-6 text-right text-muted slide-pr0">
                                    <a id="like" t-att-user-id="user.id" t-att-attachment-id="slideview.id" class="slide-like text-muted" data-count-el='.count-likes' t-attf-data-href="/slides/#{slug(channel)}/view/#{slug(slideview)}/like"><i class="fa fa-thumbs-up fa-1x count-likes"> <t t-esc="slideview.likes"/></i> Like</a>

                                    <a id="unlike" t-att-user-id="user.id" t-att-attachment-id="slideview.id" class="slide-unlike text-muted" data-count-el=".count-dislikes" t-attf-data-href="/slides/#{slug(channel)}/view/#{slug(slideview)}/dislike"><i class="fa fa-thumbs-down fa-1x count-dislikes"> <t t-esc="slideview.dislikes"/></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt8 mb8 slide-pr0 slide-pl0">
                    <ul class="nav nav-tabs nav-tabs-simple nav-tabs-sm" role="tablist">
                        <li t-att-class="not comments and 'slide-tabs-li active' or 'slide-tabs-li'"><a href="#about" role="tab" data-toggle="tab" class="slide-tabs">About</a></li>
                        <li class="slide-tabs-li"><a href="#share" role="tab" data-toggle="tab" class="slide-tabs">Share</a></li>
                        <li t-att-class="comments and 'slide-tabs-li active' or 'slide-tabs-li'"><a href="#discuss" role="tab" data-toggle="tab" class="slide-tabs">Discuss</a></li>
                        <li class="slide-tabs-li"><a href="#transcript" role="tab" data-toggle="tab" class="slide-tabs">Transcript</a></li>
                    </ul>
                    <div class="tab-content" style="padding: 20px 5px 5px 5px;">
                        <div t-att-class="not comments and 'tab-pane fade in active' or 'tab-pane fade'" id="about">
                            <div t-if="slideview.description" t-field="slideview.description"/>
                            <div t-if="not slideview.description" t-field="slideview.website_description"/>
                        </div>
                        <div class="tab-pane fade" id="share">
                            <t t-call="website_slides.socialshare">
                                <t t-set="slide" t-value="slideview"/>
                            </t>
                            <t t-call="website_slides.sendemail">
                                <t t-set="slide" t-value="slideview"/>
                            </t>
                            <t t-call="website_slides.embed">
                                <t t-set="slide" t-value="slideview"/>
                            </t>
                        </div>
                        <div t-att-class="comments and 'tab-pane fade in active' or 'tab-pane fade'" id="discuss">
                            <form id="comment" t-attf-action="/slides/comment/#{slideview.id}" method="POST">
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="img img-circle media-object" t-att-src="'/website/image?model=res.partner&amp;field=image_small&amp;id='+str(user_id.partner_id.id)" style="width: 30px"/>
                                    </span>
                                    <div class="media-body">
                                        <textarea rows="3" name="comment" class="form-control" placeholder="Write a comment..."></textarea>
                                        <button type="submit" class="btn btn-primary mt8">Post</button>
                                    </div>
                                </div>
                            </form>
                            <ul class="media-list">
                                <li t-foreach="comments" t-as="message" class="media">
                                    <span class="pull-left">
                                        <img class="media-object img img-circle" t-att-src="'/website/image?model=mail.message&amp;field=author_avatar&amp;id='+str(message.id)" style="width: 30px"/>
                                    </span>
                                    <div class="media-body">
                                        <t t-call="website.publish_short">
                                            <t t-set="object" t-value="message"/>
                                        </t>
                                        <span t-field="message.author_id" style="display: inline-block;" t-field-options='{"widget": "contact", "fields": ["name"]}'/>
                                        <span class="text-muted">on<span t-field="message.date"/></span>
                                        <div t-field="message.body" class="discussion_scroll_post"></div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="tab-pane fade text-muted" id="transcript">
                            <t t-if="slideview.index_content">
                                <t t-foreach="slideview.index_content.split('\n')" t-as="line">
                                    <p t-esc="line"></p>
                                </t>
                            </t>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="active"><a href="#related" data-toggle="tab">Related</a></li>
                    <li><a href="#most_viewed" data-toggle="tab">Most Viewed</a></li>
                </ul>
                <div class="tab-content">
                    <div id="related" class="tab-pane active">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 slide-box">
                            <ul class="media-list">
                                <t t-foreach="related_ids" t-as="attachment">
                                    <t t-call="website_slides.related_slides">
                                        <t t-set="relatedslide" t-value="slideview"/>
                                    </t>
                                </t>
                            </ul>
                        </div>
                    </div>
                    <div id="most_viewed" class="tab-pane">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 slide-box">
                            <ul class="media-list">
                                <t t-foreach="most_viewed_ids" t-as="attachment">
                                    <t t-call="website_slides.mostviewed_slides"/>
                                </t>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="related_slides" name="Related Slide">
            <li class="media slide-container" t-if="relatedslide and relatedslide.id != attachment.id">
                <a class="pull-left" t-attf-href="/slides/#{slug(channel)}/#{attachment.slide_type}/#{slug(attachment)}">
                    <span class="slide-small-box">
                        <img class="media-object img-responsive" t-attf-src="/website/image/ir.attachment/#{attachment.id}/image"/>
                    </span>
                </a>
                <div class="media-heading">
                    <div class="text-truncation" t-att-title="attachment.name">
                        <t t-esc="attachment.name"/>
                    </div>
                    <small class="text-muted">
                        <div class="pull-left"><t t-esc="attachment.slide_views"/> Views</div><br/>
                        <div class="pull-left"><timeago class="timeago" t-att-title="attachment.create_date"></timeago></div>
                    </small>
                </div>
            </li>
        </template>

        <template id="mostviewed_slides" name="Mostviewed Slide">
            <li class="media slide-container">
                <a class="pull-left" t-attf-href="/slides/#{slug(channel)}/#{attachment.slide_type}/#{slug(attachment)}">
                    <span class="slide-small-box">
                        <img class="media-object img-responsive" t-attf-src="/website/image/ir.attachment/#{attachment.id}/image"/>
                    </span>
                </a>
                <div class="media-heading">
                    <div class="text-truncation" t-att-title="attachment.name">
                        <t t-esc="attachment.name"/>
                    </div>
                    <small class="text-muted">
                        <div class="pull-left"><t t-esc="attachment.slide_views"/> Views</div><br/>
                        <div class="pull-left"><timeago class="timeago" t-att-title="attachment.create_date"></timeago></div>
                    </small>
                </div>
            </li>
        </template>

     </data>
</openerp>
