<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <template id="assets_editor" inherit_id="website.assets_editor" name="Twitter wall Editor">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/website_twitter_wall/static/src/js/website_twitter_wall.editor.js" />
            </xpath>
        </template>

        <template id="twitter_wall_footer_custom" inherit_id="website.footer_default" name="Footer Twitter Wall Link">
            <xpath expr="//div[@id='info']/ul" position="inside">
                <li><a href="/twitter_walls">Twitter Wall</a></li>
            </xpath>
        </template>

        <template id="assets_frontend" inherit_id="website.assets_frontend" name="Slide">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/website_twitter_wall/static/src/js/website_twitter_wall.js" />
                <link type="text/less" href="/website_twitter_wall/static/src/less/website_twitter_wall.less" rel="stylesheet" t-ignore="true" />
                <link type="text/stylesheet" rel="stylesheet" href="/website_twitter_wall/static/src/css/website_twitter_wall.css" />
            </xpath>
        </template>

        <template id="website_twitter_wall.twitter_thumb_wall" name="Twitter Wall">
            <div class="col-md-4">
                <div t-attf-class="wall-dislay-box mt16 mb16">
                    <span class="wall-image-box">
                        <a t-attf-href="/twitter_wall/#{wall.id}">
                            <img t-att-src="wall.get_image()" class="img-responsive full_width" />
                        </a>
                    </span>
                    <div class="full_padding">
                        <div class="mb8 mt0">
                            <div class="wall-title-text-truncation pull-left">
                                <div t-esc="wall.name" class="h3 mt0 text_ellipsis" />
                            </div>
                            <div class="btn-group pull-right">
                                <a t-attf-href="/twitter_wall/story/#{wall.id}" class="btn btn-default" t-if="wall.twitter_access_token" title="Storify">
                                   <i class="fa fa-arrows-alt"></i>
                                </a>
                                <a t-attf-href="/twitter_wall/story/#{wall.id}" class="btn btn-default" t-if="wall.state == 'streaming'" title="Archive">
                                   <i class="fa fa-archive"></i>
                                </a>
                            </div>
                        </div>
                        <t t-if="wall.description">
                            <div class="wall-title-text-truncation full_width">
                                <p t-field="wall.description" class="mb16 text_ellipsis" />
                            </div>
                        </t>
                        <div class="mb8">
                            <div t-if="not wall.twitter_access_token and not is_public_user" class="pull-left">
                                <a t-attf-href="/twitter_wall/authenticate/#{wall.id}"><i class="fa fa-arrow-right"></i> Verify with Twitter Account</a> 
                            </div>
                            <div class="pull-left">
                                <t t-if="wall.state == 'streaming'">
                                    <span class="label label-success full_font">Live Event</span>
                                </t>
                                <t t-if="wall.state == 'story'">
                                    <span class="label label-info full_font">Storify</span>
                                </t>
                            </div>
                            <div class="pull-right">
                                <t t-call="website.publish_management">
                                    <t t-set="object" t-value="wall"/>
                                    <t t-set="publish_edit" t-value="True"/>
                                    <li><a t-attf-href="/twitter_wall/#{wall.id}/delete">Delete</a></li>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>
        
        <template id="website_twitter_wall.twitter_walls" name="Twitter Walls">
            <t t-call="website.layout">
                <div class="container">
                    <div class="row">
                        <t t-foreach="walls" t-as="wall">
                            <t t-call="website_twitter_wall.twitter_thumb_wall"/>
                        </t>
                    </div>
                </div>
            </t>
        </template>

        <template id="website_twitter_wall.twitter_wall_archieve" name="Archieved Wall">
            <t t-set="head">
                <script src="//platform.twitter.com/widgets.js" charset="utf-8" />
                <script type="text/javascript" src="/website_twitter_wall/static/src/js/website_twitter_wall_archived.js" />
            </t>
            <t t-call="website.layout">
                <div t-attf-style="background-image: url(/website/image/website.twitter.wall/#{wall.id}/image);background-repeat: no-repeat;background-size: 100% auto;">
                    <div class="cover">
                        <div class="container">
                            <h1 class="mt32 wall-arch-title"><t t-esc="wall.name"/></h1>
                            <p class="mt32 wall-arch-subtitle">
                                <t t-esc="wall.description"/>
                            </p>
                        </div>
                    </div>
                </div>
                <nav class="navbar navbar-default" role="navigation">
                    <div class="container">
                        <div class="container-fluid">
                            <ul class="nav navbar-nav">
                                <li>
                                    <p class="navbar-text mb0"><timeago class="timeago" t-att-title="wall.create_date"></timeago></p>
                                </li>
                                <li>
                                    <p class="navbar-text mb0"><t t-esc="wall.number_view"/> Total views</p>
                                </li>
                            </ul>
                            <ul class="nav navbar-nav navbar-right">
                                <li>
                                    <a class="navbar-text mt0 mb0"><i class="fa fa-code"></i> Embed</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
                <div class="container">
                    <div class="row">
                        <center>
                            <ul class="timeline">
                                <t t-foreach="tweets" t-as="tweet">
                                    <li t-attf-class="#{tweet_index % 2 and 'timeline-inverted'} tw">
                                        <div class="timeline-badge primary">
                                            <a>
                                                <i class="fa fa-dot-circle-o" rel="tooltip" t-att-title="tweet.create_date"></i>
                                            </a>
                                        </div>
                                        <div class="timeline-panel">
                                            <div t-attf-class="#{tweet_index % 2 and 'right-item' or 'left-item'}">
                                                <t t-raw="tweet.html_description"/>
                                            </div>
                                        </div>
                                    </li>
                                </t>
                            </ul>
                        </center>
                    </div>
                    <div class="row text-center">
                        <t t-call="website.pager"/>
                    </div>
                </div>
            </t>
        </template>

        <!-- Page that display walls -->
        <template id="twitter_wall" name="Twitter Wall Tweet">
            <t t-call="website.layout">
                <t t-set="head">
                    <script src="//platform.twitter.com/widgets.js" charset="utf-8" />
                </t>
                <div class="full_screen" name="tweets_for_client" t-attf-style="background-image: url('data:image/jpg;base64, #{back_image}')">
                    <div class="container" t-att-wall_id="wall_id">
                        <div class="row">
                            <center>
                                <div class="col-sm-12" id="tweet_wall_div" />
                            </center>
                        </div>
                    </div>
                    <nav class="navbar navbar-default navbar-fixed-bottom" role="navigation">
                        <div class="container">
                            <div class="container-fluid">
                                <div class="navbar-header">
                                    <p class="navbar-text mb0">
                                        Tweet us: <label class="label label-danger"># opendays</label>
                                    </p>
                                </div>
                                <ul class="nav navbar-nav navbar-right">
                                    <li>
                                        <p class="navbar-text mb0">Twitter wall powered by Odoo.</p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                </div>
            </t>
        </template>

        <template id="content_new_twitter_wall" inherit_id="website.user_navbar">
            <xpath expr="//ul[@id='oe_systray']/li/ul[@class='dropdown-menu oe_content_menu']" position="inside">
                 <li><a href="#" data-action="new_twitter_wall">New Twitter Wall</a></li>
            </xpath>
        </template>

    </data>
</openerp>
