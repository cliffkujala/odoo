<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="unsubscribe">
            <div class="container mt8">
                <div class="row">
                    <form t-attf-action="/mail/mailing/unsubscribe" method="POST">
                        <div class="col-md-6 col-md-offset-3">

                            <t t-if="contacts">
                                <div class="alert alert-info text-center">
                                    <p>Choose the mailing lists from which one you want to unsubscribe.</p>
                                </div>

                                <p><strong>General</strong></p>
                                <ul class="list-group">
                                    <li class="list-group-item"><input type="checkbox" id="all_mailing_lists"/> Unsubscribe from everything</li>
                                </ul>

                                <p><strong>Mailing Lists</strong></p>
                                <ul class="list-group">
                                    <t t-foreach="contacts" t-as="contact">
                                        <li class="list-group-item">
                                            <input type="checkbox" class="mail_list_checkbox" name="contact_ids" t-att-value="contact['id']"/> 
                                            <t t-esc="contact['list_id'][1]"/>
                                        </li>
                                    </t>
                                </ul>
                            
                                <div class="text-center mb16">
                                    <input type="submit" id="send_form" class="btn btn-primary" value="Unsubscribe from selected mailing lists"/>
                                </div>
                            </t>

                            <t t-if="contacts == False">
                                <div class="alert alert-info text-center">
                                    <p>You are not subscribed to any of our mailing list.</p>
                                </div>
                            </t>
                        </div>
                    </form>
                </div>
            </div>
        </template>

        <template id="unsubscribed">
            <div class="container mt8">
                <div class="row">
                    <div class="col-md-6 col-md-offset-3">
                        <div class="alert alert-success text-center">
                            <p>You are now unsubscribed from the selected mailing list.</p>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="page_unsubscribe" name="Unsubscribe">
            <t t-call="website.layout">
                <t t-call="mass_mailing.unsubscribe"/>
            </t>
        </template>

        <template id="page_unsubscribed" name="Unsubscribed">
            <t t-call="website.layout">
                <t t-call="mass_mailing.unsubscribed"/>
            </t>
        </template>
    </data>
</openerp>